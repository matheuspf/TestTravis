environment:
  home: C:\projects
  cmake: C:\projects\cmake-3.4.1-win32-x86\bin\cmake.exe
  matrix:
  - generator : Visual Studio 17 Win64
  - generator : Visual Studio 14 Win64

version: '{build}'

os: Visual Studio 2015

branches:
  only:
    - master

install:
  - cmd: cd %home%
  - ps: wget https://cmake.org/files/v3.4/cmake-3.4.1-win32-x86.zip -OutFile cmake.zip
  - cmd: 7z x cmake.zip -o"C:\projects" -y > nul # will extract to cmake-3.4.1-win32-x86\
  - cmd: '%cmake% --version'

before_build:
  - cmd: dir
  - cmd: cd C:\projects
  - cmd: dir
  - cmd: cd C:\projects\TestTravis\tests
  - cmd: mkdir build
  - cmd: cd build
  - cmd: cmake ..
  - cmd: cmake --build .

after_build:
  - cmd: 'cd C:\projects\TestTravis\tests\build'
  - cmd: HandyTest.exe